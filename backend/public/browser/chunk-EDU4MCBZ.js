import{a as b,b as y,e as C}from"./chunk-QZPEFCOH.js";import{J as f,N,S as m,a as r,b as s,da as v,l as d,p as n,x as l}from"./chunk-DCXXYO24.js";var P=class u{http=m(y);apiConfig=m(C);baseUrl=`${this.apiConfig.baseUrl}/noticias`;categorias=v(["Todos","Noticias Locales","Deportes","Cultura","Comunidad"]);noticiasCache=v([]);getCategorias(){return this.categorias}getNoticias(){return this.noticiasCache}getNoticiasPaginadas(e,a,i,t){let c=new b().set("pagina",e.toString()).set("items_por_pagina",a.toString());return i&&i!=="Todos"&&(c=c.set("categoria",i)),t&&t.trim()&&(c=c.set("busqueda",t.trim())),this.http.get(this.baseUrl,{params:c}).pipe(n(o=>{let p=o.items.map(g=>s(r({},g),{fecha:new Date(g.fecha),autor:g.autor_nombre})),D={id:9999,titulo:"Posada Navide\xF1a en Facultad de Agronom\xEDa Juan Jos\xE9 R\xEDos",descripcion:'Celebraci\xF3n navide\xF1a para ni\xF1os de la "escuelita" con diferentes actividades y regalos.',contenido:'Se realiz\xF3 una emotiva posada navide\xF1a para los ni\xF1os de la "escuelita" en las instalaciones de la Facultad de Agronom\xEDa Juan Jos\xE9 R\xEDos. Durante el evento, se llevaron a cabo diversas actividades recreativas y juegos para la diversi\xF3n de los peque\xF1os. El momento m\xE1s esperado fue la entrega de regalos, donde cada ni\xF1o recibi\xF3 un presente navide\xF1o, llenando de alegr\xEDa y sonrisas el lugar. Fue una jornada llena de esp\xEDritu navide\xF1o y convivencia comunitaria.',fecha:new Date,autor:"Administrador",categoria:"Comunidad",imagen:"images/posada_1.jpg"},h=p;return(!i||i==="Todos"||i==="Comunidad")&&(!t||t.trim()==="")&&(h=[D,...p]),{items:h,totalItems:o.total_items+1,totalPaginas:o.total_paginas,paginaActual:o.pagina_actual,itemsPorPagina:o.items_por_pagina}}),f(o=>this.noticiasCache.set(o.items)),l(o=>(console.error("Error al obtener noticias:",o),d({items:[{id:9999,titulo:"Posada Navide\xF1a en Facultad de Agronom\xEDa Juan Jos\xE9 R\xEDos",descripcion:'Celebraci\xF3n navide\xF1a para ni\xF1os de la "escuelita" con diferentes actividades y regalos.',contenido:'Se realiz\xF3 una emotiva posada navide\xF1a para los ni\xF1os de la "escuelita" en las instalaciones de la Facultad de Agronom\xEDa Juan Jos\xE9 R\xEDos. Durante el evento, se llevaron a cabo diversas actividades recreativas y juegos para la diversi\xF3n de los peque\xF1os. El momento m\xE1s esperado fue la entrega de regalos, donde cada ni\xF1o recibi\xF3 un presente navide\xF1o, llenando de alegr\xEDa y sonrisas el lugar. Fue una jornada llena de esp\xEDritu navide\xF1o y convivencia comunitaria.',fecha:new Date,autor:"Administrador",categoria:"Comunidad",imagen:"images/posada_1.jpg"}],totalItems:1,totalPaginas:1,paginaActual:1,itemsPorPagina:a}))))}getNoticiaPorId(e){return this.http.get(`${this.baseUrl}/${e}`).pipe(n(a=>s(r({},a),{fecha:new Date(a.fecha),autor:a.autor_nombre})),l(()=>d(void 0)))}agregarNoticia(e){return this.http.post(this.baseUrl,{titulo:e.titulo,descripcion:e.descripcion,contenido:e.contenido,categoria:e.categoria,imagen:e.imagen}).pipe(n(a=>s(r({},a),{fecha:new Date(a.fecha),autor:a.autor_nombre})))}actualizarNoticia(e,a){return this.http.put(`${this.baseUrl}/${e}`,{titulo:a.titulo,descripcion:a.descripcion,contenido:a.contenido,categoria:a.categoria,imagen:a.imagen}).pipe(n(i=>s(r({},i),{fecha:new Date(i.fecha),autor:i.autor_nombre})))}eliminarNoticia(e){return this.http.delete(`${this.baseUrl}/${e}`).pipe(n(()=>!0),l(()=>d(!1)))}buscarNoticias(e){let a=new b().set("busqueda",e);return this.http.get(this.baseUrl,{params:a}).pipe(n(i=>i.items.map(t=>s(r({},t),{fecha:new Date(t.fecha),autor:t.autor_nombre}))),l(()=>d([])))}static \u0275fac=function(a){return new(a||u)};static \u0275prov=N({token:u,factory:u.\u0275fac,providedIn:"root"})};export{P as a};
